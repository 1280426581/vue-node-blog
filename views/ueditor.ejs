<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>后台管理系统</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel='stylesheet' href='/stylesheets/edit.css'/>
    <link href="stylesheets/jquery-accordion-menu.css" rel="stylesheet" type="text/css" />
    <link href="stylesheets/font-awesome.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.all.min.js"> </script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/lang/zh-cn/zh-cn.js"> </script>
</head>
<body>
<div class='content'>
      <div id="jquery-accordion-menu" class="jquery-accordion-menu red">
		<ul id="demo-list">
		   <li class=""><a href="#"><i class="fa fa-home"></i>Home </a></li>
			<li><a href="#"><i class="fa fa-glass"></i>Events </a></li>
			<li><a href="#"><i class="fa fa-file-image-o"></i>Gallery </a><span class="jquery-accordion-menu-label">
				12 </span></li>
			<li class="active"><a href="#" class=""><span class="ink animate-ink" style="height: 260px; width: 260px; top: -106.8px; left: 88.4px;"></span><i class="fa fa-cog"></i>Services <span class="submenu-indicator">+</span></a>
				<ul class="submenu" style="display: none;">
					<li><a href="#">Web Design </a></li>
					<li><a href="#">Hosting </a></li>
					<li><a href="#">Design <span class="submenu-indicator">+</span></a>
						<ul class="submenu">
							<li><a href="#">Graphics </a></li>
							<li><a href="#">Vectors </a></li>
							<li><a href="#">Photoshop </a></li>
							<li><a href="#">Fonts </a></li>
						</ul>
					</li>
					<li><a href="#">Consulting </a></li>
				</ul>
			</li>
			<li><a href="#"><i class="fa fa-home"></i>系统管理 </a></li>
			<li><a href="#"><i class="fa fa-suitcase"></i>Portfolio <span class="submenu-indicator">+</span></a>
				<ul class="submenu" style="">
					<li><a href="#">Web Design </a></li>
					<li><a href="#">Graphics </a><span class="jquery-accordion-menu-label">10 </span>
					</li>
					<li><a href="#">Photoshop </a></li>
					<li><a href="#">Programming </a></li>
				</ul>
			</li>
			<li><a href="#"><i class="fa fa-user"></i>About </a></li>
			<li><a href="#"><i class="fa fa-envelope"></i>Contact </a></li>
		   
		</ul>
		<div class="jquery-accordion-menu-footer">
			Footer
		</div>
	</div>
        <div class='title-content'>
            <div class='content-controller'>
                <div class='controller-item' id='add-title'>新增</div>
                <div class='controller-item' id='delete-title'>删除</div>
            </div>
            <div class='content-item'></div>
        </div>
    </section>
    <div class='article-title'>
        <input type='text' placeholder='文章标题'/>
    </div>
    <div class='article-btn'>
    
    <div class='article-save-btn'>保存</div>
    <div class='article-cancel-btn'>取消</div>
    </div>
    <script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
</div>
<script src="javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="javascripts/jquery-accordion-menu.js" type="text/javascript"></script>
<script type="text/javascript">
    var title = 'article';
    var item = 'web前端';
    var ue;
    //实例化编辑器
    ue = UE.getEditor('editor');
    var showEdit;
    //显示编辑器；
    showEdit = function(){
        $("#editor,.article-title,.article-btn").toggle();
        return;
    }
    var getHtml;
    //得到编辑器生成的html；
    getHtml = function(){
        var title = $(".article-title input").val();
        var html = UE.getEditor('editor').getContent();
        return {title:title,html:html};
    }
    $("#add-title").click(function(){
        showEdit();
    })
    $(".article-cancel-btn").click(function(){
        showEdit();
    })
    $(".article-save-btn").click(function(){
        var content = {
            "title":title,
            "title-item":item,
            "html-top":getHtml().title,
            "html":getHtml().html
        }
        if(content.html-top==''){
            alert("请输入文章标题");
            return;
        }else{
            $.post("http://127.0.0.1:3000/edit",content,function(res){
                if(res.error==0){
                    showEdit();
                }else{
                    alert(res.ms);
                }
            });
        }
    })
    $(".title-item").click(function(){
        item = $(this).text();
        $(".title-item").each(function(){
            $(this).hasClass("item-select");
            $(this).removeClass("item-select");
        })
        $(this).addClass("item-select");
    })
    
</script>
</body>
</html>